<app-navbar></app-navbar>

  <main class="main-content">
    <section class="section active">
      <h2 class="section-title"> Ve√≠culos Improdutivos</h2>

   
      <div class="filter-bar">
        <button class="filter-btn" [class.active]="filtroAtivo === 'todos'" (click)="filtrarPor('todos')">
          Todos
        </button>
        <button class="filter-btn" [class.active]="filtroAtivo === 'Manuten√ß√£o'" (click)="filtrarPor('Manuten√ß√£o')">
          Manuten√ß√£o
        </button>
        <button class="filter-btn" [class.active]="filtroAtivo === 'Sinistro'" (click)="filtrarPor('Sinistro')">
          Sinistro
        </button>
        <button class="filter-btn" [class.active]="filtroAtivo === 'Documenta√ß√£o'" (click)="filtrarPor('Documenta√ß√£o')">
          Documenta√ß√£o
        </button>
        <button class="filter-btn" [class.active]="filtroAtivo === 'Outros'" (click)="filtrarPor('Outros')">
          Outros
        </button>
      </div>

    
      <div class="search-section">
        <input type="text" class="search-input" placeholder="üîç Buscar por placa ou modelo..." [(ngModel)]="termoBusca"
          (input)="buscarVeiculos()">
      </div>

      
      <div class="table-container">
      
        <div *ngIf="carregando" class="loading">
          <div class="spinner"></div>
          <p>Carregando ve√≠culos...</p>
        </div>

      
        <table class="table" *ngIf="!carregando">
          <thead>
            <tr>
              <th>Placa</th>
              <th>GR</th>
              <th>Modelo</th>
              <th>KM Atual</th>
              <th>Status</th>
              <th>√öltima Atualiza√ß√£o</th>
              <th>Dias</th>
              <th>Fornecedor</th>
              <th>A√ß√µes</th>
            </tr>
          </thead>
          <tbody>
         
            <tr *ngIf="veiculosFiltrados.length === 0">
              <td colspan="9" class="empty-message">
                <div class="empty-state">
                  <span class="empty-icon"></span>
                  <h3>Nenhum ve√≠culo encontrado</h3>
                  <p>N√£o h√° ve√≠culos que correspondam aos filtros selecionados.</p>
                </div>
              </td>
            </tr>

        
            <tr *ngFor="let v of veiculosFiltrados; trackBy: trackByPlaca">
              <td class="placa-cell">
                <strong>{{ v.placa }}</strong>
              </td>
              <td>{{ v.gr || 'N/A' }}</td>
              <td>
                <div class="modelo-info">
                  <strong>{{ v.modelo }}</strong>
                  <small *ngIf="v.marca">{{ v.marca }}</small>
                </div>
              </td>
              <td>{{ (v.km | number) || 0 }} km</td>
              <td>
                <span class="status-badge" [ngClass]="{
                  'status-manutencao': v.status === 'Manuten√ß√£o',
                  'status-sinistro': v.status === 'Sinistro', 
                  'status-documentacao': v.status === 'Documenta√ß√£o',
                  'status-outros': v.status === 'Outros'
                }">
                  {{ v.status || v.motivo }}
                </span>
              </td>
              <td>{{ formatarData(v.dataEntrada) }}</td>
              <td>
                <span class="dias-badge">{{ calcularDias(v.dataEntrada) }} dias</span>
              </td>
              <td>{{ v.fornecedor || 'N/A' }}</td>
              <td class="actions">
                <button class="btn btn-success" (click)="reativarVeiculo(v)" title="Reativar ve√≠culo">
                Reativar
                </button>
                <button class="btn btn-primary" (click)="editarVeiculo(v)" title="Editar ve√≠culo">
                 Editar
                </button>
                <button class="btn btn-danger" (click)="removerVeiculo(v)" title="Remover ve√≠culo">
                Remover
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

     
    </section>
  </main>
   <app-footer></app-footer>
